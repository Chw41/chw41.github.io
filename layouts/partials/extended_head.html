<link rel="stylesheet" href="{{ "css/main.css" | relURL }}"/>
<link rel="icon" href="{{ "favicon.ico" | relURL }}" sizes="any">

{{ if eq .Section "4b0u7" }}
<link rel="stylesheet" href="/css/about.css">
{{ end }}

{{ if eq .Section "b1og" }}
<link rel="stylesheet" href="/css/blog.css">
{{ end }}

{{ if eq .Section "1nd1v1du4l-c7f" }}
<link rel="stylesheet" href="/css/individual-ctf.css">
{{ end }}

{{ if eq .Section "1ogin" }}
<link rel="stylesheet" href="/css/login.css">
{{ end }}

{{ if .IsPage }}
<link rel="stylesheet" href="/css/article.css">
{{ end }}

<meta name="google-site-verification" content="pDIkMeVDXrU_s4uCvUlVlTaDeyW0g-I1d3sYfAyISoQ" />

{{/* -------- JSON-LD structured data -------- */}}
{{- $siteName := .Site.Title -}}
{{- $siteURL := .Site.BaseURL -}}
{{- $authorName := (.Params.author | default "CHW") -}}
{{- $desc := ((.Description | default .Summary) | plainify | htmlUnescape | truncate 200) -}}
{{- $keywords := "" -}}
{{- with .Params.tags -}}{{- $keywords = (delimit . ", ") -}}{{- end -}}

{{ if .IsHome }}
<script type="application/ld+json">
{{- $schema := dict
  "@context" "https://schema.org"
  "@type" "WebSite"
  "name" $siteName
  "url" $siteURL
-}}
{{ $schema | jsonify | safeJS }}
</script>

<script type="application/ld+json">
{{- $person := dict
  "@context" "https://schema.org"
  "@type" "Person"
  "name" "CHW"
  "alternateName" "chw41"
  "url" $siteURL
  "image" (("img/avatar.png" | absURL))
  "sameAs" (slice "https://github.com/Chw41" "https://chw41.github.io/")
-}}
{{ $person | jsonify | safeJS }}
</script>

{{ else if .IsPage }}
{{- $pageCover := ("og-image.png" | absURL) -}}
{{- if (isset .Params "cover") -}}
  {{- $tmp := .Param "cover" -}}
  {{- with (.Resources.GetMatch (.Param "cover")) -}}
    {{- $tmp = .RelPermalink -}}
  {{- end -}}
  {{- $pageCover = ($tmp | absURL) -}}
{{- end -}}

{{- $isArticle := or (eq .Section "b1og") (eq .Section "1nd1v1du4l-c7f") -}}
{{- $type := cond $isArticle "BlogPosting" "WebPage" -}}

<script type="application/ld+json">
{{- $schema := dict
  "@context" "https://schema.org"
  "@type" $type
  "headline" .Title
  "description" $desc
  "inLanguage" .Site.LanguageCode
  "author" (dict "@type" "Person" "name" $authorName)
  "datePublished" (.Date.Format "2006-01-02T15:04:05-07:00")
  "dateModified" (.Lastmod.Format "2006-01-02T15:04:05-07:00")
  "mainEntityOfPage" (dict "@type" "WebPage" "@id" .Permalink)
  "url" .Permalink
  "image" (slice $pageCover)
  "keywords" $keywords
  "publisher" (dict "@type" "Person" "name" $authorName)
  "isPartOf" (dict "@type" "WebSite" "name" $siteName "url" $siteURL)
-}}
{{ $schema | jsonify | safeJS }}
</script>
{{ end }}
